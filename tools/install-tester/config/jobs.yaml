- match:
    version: "3\\.[2-99]\\.*"
    package:
      - enterprise
  distros:
    - amazon-linux
    - ubuntu
    - debian
    - rhel:9
  skip:
    - 3.2.x/debian/enterprise/package
    - 3.2.x/debian/enterprise/repository
    - 3.3.x/debian/enterprise/package
    - 3.3.x/debian/enterprise/repository
    - 3.2.x/rhel:9/enterprise/package
    - 3.2.x/rhel:9/enterprise/repository
    - 3.3.x/rhel:9/enterprise/package
    - 3.3.x/rhel:9/enterprise/repository
  arch:
    - linux/arm64
  outputs:
    enterprise: "Kong Enterprise {{ version }}"

- match:
    version: "3\\..*"
    package:
      - oss
      - enterprise
  distros:
    - amazon-linux
    - ubuntu
    - rhel:9
    - debian
  arch:
    - linux/amd64
  outputs:
    enterprise: "Kong Enterprise {{ version }}"
    oss: "{{ version }}"
- match:
    version: "2\\..*"
    package:
      - oss
      - enterprise
  distros:
    - ubuntu
    - rhel:8
    - amazon-linux
    - debian
  arch:
    - linux/amd64
  outputs:
    enterprise: "Kong Enterprise {{ version }}"
    oss: "{{ version }}"
